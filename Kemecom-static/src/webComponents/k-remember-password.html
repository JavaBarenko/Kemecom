<polymer-element name="k-remember-password">
    <template>
        <section class=remember-password">
            <header>
                <h3>Esqueci minha senha</h3>
                <p><strong>Insira seu E-Mail no campo abaixo.</strong><br>
                    Você receberá sua nova senha por E-Mail.
                </p>
            </header>
            <article>
                <p>
                    <label for="email">E-Mail:&nbsp;</label>
                    <input id="email" type="email" placeholder="E-Mail" maxlength="120">
                </p>
                <p>
                    <button on-click="resetPassword">Confirmar</button>
                    <button on-click="cancel">Cancelar</button>
                </p>
            </article>
        </section>
    </template>

    <script>
        var waiting = false;
        Polymer('k-remember-password', {
            resetPassword: function() {
                if (waiting)
                    return;
                alert("manda ajax de resetar password, manda para a home e alerta envio com sucesso/falha no callback (em um alerta no topo da pagina)");
                amplify.request("user:sendRememberPassword", {
                    email: this.$.email.value
                }, jQuery.proxy(function(msg, status) {
                    waiting = false;
                    if ("nocontent" === status) {
                        K.message.showError(msg.message);
                    } else {
                        K.message.showSuccess("Senha resetada com sucesso! Em instantes você receberá um email com sua nova senha.");
                    }
                    K.goTo('k-login');
                }), this);
                waiting = true;
            },
            cancel: function() {
                K.goToHome();
            }
        });
    </script>
</polymer-element>