<polymer-element name="k-facebook">
    <template>
        <link rel="stylesheet" href="../assets/style.css" />
        <button id="facebook" on-click="click">Entrar com sua conta do Facebook!</button>
    </template>

    <script>
        Polymer('k-facebook', {
            click: function() {
                jQuery.ajax({
                    url: "/Kemecom-web/ws/auth/facebook",
                    dataType: "json",
                    type: "GET",
                    context: this
                }).done(function(data, status, xhr) {
                    if (data.successful) {
                        K.message.showSuccess(data.message);
                        K.setToken(data.object);
                        amplify.publish("auth/loggined");
                        K.goTo('k-profile');
                    } else {
                        K.message.showError(data.message);
                        K.goTo('k-login');
                    }
                }).fail(function(xhr, error, errorMsg) {
                    K.message.showError('Erro [' + error + "]:" + errorMsg);
                    K.goTo('k-login');
                });
            }
        });
    </script>
</polymer-element>

