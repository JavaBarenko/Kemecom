<polymer-element name="k-sign-in">
    <template>
        <h3>Novo Cadastro</h3>
        <session>
            <article>
                <header>Cadastre-se via Facebook</header>
                <k-facebook></k-facebook>
            </article>
            <article>
                <header>Cadastre-se via Formulário</header>
                <p>
                    <label for="email">E-Mail:&nbsp;</label>
                    <input id="email" type="email" placeholder="E-Mail" maxlength="120">
                </p>
                <p>
                    <label for="password">Senha:&nbsp;</label>
                    <input type="password" id="password" placeholder="Senha" maxlength="20">
                </p>
                <p>
                    <label for="password2">Senha:&nbsp;</label>
                    <input type="password2" id="password2" placeholder="Confirmação de Senha" maxlength="20">
                </p>
                <p>
                    <button on-click="signin">Criar conta!</button>
                    <button on-click="cancel">Cancelar</button>
                </p>
            </article>
        </session>
    </template>

    <script>
        Polymer('k-sign-in', {
            signin: function() {
                amplify.request("user:addUser", {
                    email: this.$.email.value,
                    password: this.$.password.value
                }, jQuery.proxy(function(msg) {
                    if (msg.type === 'SUCCESS') {
                        K.message.showSuccess(msg.message);
                        K.goTo('k-login');
                    } else {
                        K.message.showError(msg.message);
                        this.$.email.value = msg.object.email;
                        this.$.password.value = msg.object.password;
                    }
                }, this));
            },
            cancel: function() {
                K.goTo('k-login');
            }
        });
    </script>
</polymer-element>