<polymer-element name="k-logout">
    <template>
        <div class="logout">
            <a href="#">Logout</a>
        </div>
    </template>

    <script>
        Polymer('k-logout', {
            click: function() {
                if (confirm("Deseja realmente sair?")) {
                    jQuery.ajax({
                        url: "/Kemecom-web/ws/auth",
                        dataType: "json",
                        type: "DELETE",
                        context: this,
                        beforeSend: function(xhr, settings) {
                            xhr.setRequestHeader('KemecomToken', K.getToken());
                        }
                    }).done(function(data, status, xhr) {
                        if (data.successful) {
                            K.message.showSuccess(data.message);
                            K.setToken("");
                        } else {
                            K.message.showError(data.message);
                        }
                    }).fail(function(xhr, error, errorMsg) {
                        K.message.showError('Erro [' + error + "]:" + errorMsg);
                    }).always(function() {
                        K.goTo('k-login');
                    });
                }

                e.preventDefault();
            }
        });
    </script>
</polymer-element>